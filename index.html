<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulačka složeného úročení</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg); color: var(--text); display: flex; justify-content: center; padding: 20px; }
        .container { background: var(--card); padding: 30px; border-radius: 12px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); max-width: 900px; width: 100%; }
        h1 { text-align: center; color: var(--primary); }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .input-group { display: flex; flex-direction: column; }
        label { font-weight: 600; margin-bottom: 5px; font-size: 0.9rem; }
        input, select { padding: 10px; border: 1px solid #cbd5e1; border-radius: 6px; font-size: 1rem; }
        button { grid-column: span 2; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; transition: opacity 0.2s; }
        button:hover { opacity: 0.9; }
        .results { margin-top: 30px; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; text-align: center; }
        .res-card { background: #eff6ff; padding: 15px; border-radius: 8px; border: 1px solid #dbeafe; }
        .res-card span { display: block; font-size: 1.2rem; font-weight: bold; color: var(--primary); }
        canvas { margin-top: 30px; }
    </style>
</head>
<body>

<div class="container">
    <h1>Kalkulačka složeného úročení</h1>
    
    <div class="grid">
        <div class="input-group">
            <label>Počáteční investice (Kč)</label>
            <input type="number" id="initial" value="50000">
        </div>
        <div class="input-group">
            <label>Měsíční příspěvek (Kč)</label>
            <input type="number" id="monthly" value="2000">
        </div>
        <div class="input-group">
            <label>Doba spoření (roky)</label>
            <input type="number" id="years" value="20">
        </div>
        <div class="input-group">
            <label>Roční zhodnocení (%)</label>
            <input type="number" id="return" value="7" step="0.1">
        </div>
        <div class="input-group">
            <label>Průměrná inflace (%)</label>
            <input type="number" id="inflation" value="3" step="0.1">
        </div>
        <div class="input-group">
            <label>Frekvence úročení</label>
            <select id="frequency">
                <option value="12">Měsíčně</option>
                <option value="4">Kvartálně</option>
                <option value="1" selected>Ročně</option>
            </select>
        </div>
        <div class="input-group">
            <label>Zvýšit vklad každých (let)</label>
            <input type="number" id="stepYears" value="5">
        </div>
        <div class="input-group">
            <label>Zvýšit vklad o (Kč)</label>
            <input type="number" id="stepAmount" value="500">
        </div>
        <button onclick="calculate()">Vypočítat zhodnocení</button>
    </div>

    <div class="results">
        <div class="res-card">Nominální hodnota<span id="resNominal">0 Kč</span></div>
        <div class="res-card">Reálná hodnota (očisť. o inflaci)<span id="resReal">0 Kč</span></div>
        <div class="res-card">Celkem vloženo<span id="resInvested">0 Kč</span></div>
    </div>

    <canvas id="myChart"></canvas>
</div>

<script>
let myChart;

function calculate() {
    const initial = parseFloat(document.getElementById('initial').value);
    let monthly = parseFloat(document.getElementById('monthly').value);
    const years = parseInt(document.getElementById('years').value);
    const annualReturn = parseFloat(document.getElementById('return').value) / 100;
    const inflation = parseFloat(document.getElementById('inflation').value) / 100;
    const frequency = parseInt(document.getElementById('frequency').value);
    const stepYears = parseInt(document.getElementById('stepYears').value);
    const stepAmount = parseFloat(document.getElementById('stepAmount').value);

    let totalNominal = initial;
    let totalReal = initial;
    let totalInvested = initial;

    let dataNominal = [initial];
    let dataReal = [initial];
    let labels = [0];

    for (let y = 1; y <= years; y++) {
        // Zvýšení pravidelného příspěvku
        if (y > 1 && y % stepYears === 1) {
            monthly += stepAmount;
        }

        // Výpočet pro daný rok po měsících
        for (let m = 1; m <= 12; m++) {
            totalNominal += monthly;
            totalInvested += monthly;
            
            // Složené úročení podle frekvence
            if (12 / frequency === m % (12 / frequency) || (12 / frequency === 12 && m === 12)) {
                // Zjednodušený výpočet úroku pro frekvenci
                totalNominal *= (1 + annualReturn / frequency);
            }
        }
        
        // Očištění o inflaci pro reálnou hodnotu
        totalReal = totalNominal / Math.pow(1 + inflation, y);

        labels.push(y);
        dataNominal.push(Math.round(totalNominal));
        dataReal.push(Math.round(totalReal));
    }

    document.getElementById('resNominal').innerText = Math.round(totalNominal).toLocaleString() + " Kč";
    document.getElementById('resReal').innerText = Math.round(totalReal).toLocaleString() + " Kč";
    document.getElementById('resInvested').innerText = Math.round(totalInvested).toLocaleString() + " Kč";

    updateChart(labels, dataNominal, dataReal);
}

function updateChart(labels, nominal, real) {
    const ctx = document.getElementById('myChart').getContext('2d');
    if (myChart) myChart.destroy();
    
    myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: 'Nominální hodnota (Kč)',
                data: nominal,
                borderColor: '#2563eb',
                fill: false,
                tension: 0.1
            }, {
                label: 'Reálná hodnota (po inflaci)',
                data: real,
                borderColor: '#ef4444',
                fill: false,
                tension: 0.1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { beginAtZero: true }
            }
        }
    });
}

// První výpočet při načtení
calculate();
</script>

</body>
</html>
